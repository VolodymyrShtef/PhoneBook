(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{27:function(t,e,a){t.exports=a(43)},43:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),c=a(23),l=a.n(c),i=a(11),r=a(26),s=a(14),u=a(15),d=a(17),m=a(16),h=a(5),p=a.n(h),f=a(10);function E(t){var e=t.contacts,a=t.onDeleteItem,n=t.onEditContact,c=t.onAddToFavToggle,l=t.onDisplayFav,i=e.map((function(t){return o.a.createElement(r,{key:Object(f.v4)(),item:t,onDeleteItem:a,onEditContact:n,onAddToFavToggle:c})}));function r(t){var e=t.item,a=t.onDeleteItem,n=t.onEditContact,c=t.onAddToFavToggle,l=e.Name,i=e.Phone,r=e.Email,s=e.favourite;return o.a.createElement("tr",null,o.a.createElement("td",null,l),o.a.createElement("td",null,i),o.a.createElement("td",null,r),o.a.createElement("td",null,o.a.createElement("button",{className:s?p.a.fav_inverted_button:p.a.managing_button,type:"button",onClick:c,id:e.id},s?"\u0417 \u043e\u0431\u0440\u0430\u043d\u0438\u0445":"\u0412 \u043e\u0431\u0440\u0430\u043d\u0456")),o.a.createElement("td",null,o.a.createElement("button",{className:p.a.managing_button,type:"button",onClick:n,id:e.id},"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438")),o.a.createElement("td",null,o.a.createElement("button",{className:p.a.managing_button,type:"button",onClick:a,id:e.id},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438")))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:p.a.newcontact_showfav_button,type:"button",onClick:l},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0456 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),o.a.createElement("table",{className:p.a.transaction_history},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u0406\u043c'\u044f"),o.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"),o.a.createElement("th",null,"\u0415\u043b. \u043f\u043e\u0448\u0442\u0430"))),o.a.createElement("tbody",null,i)))}function b(t){var e=t.contacts,a=t.onDisplayAll,n=e.map((function(t){return o.a.createElement(c,{key:Object(f.v4)(),item:t})}));function c(t){var e=t.item,a=e.Name,n=e.Phone,c=e.Email;return o.a.createElement("tr",null,o.a.createElement("td",null,a),o.a.createElement("td",null,n),o.a.createElement("td",null,c))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:p.a.show_all_button,type:"button",onClick:a},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0456 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),o.a.createElement("table",{className:p.a.transaction_history},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u0406\u043c'\u044f"),o.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443"),o.a.createElement("th",null,"\u0415\u043b. \u043f\u043e\u0448\u0442\u0430"))),o.a.createElement("tbody",null,n)))}var v=a(13),g=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={name:"",tel:"",email:""},t.handleChange=function(e){t.setState(Object(v.a)({},e.target.name,e.target.value))},t.handleSubmit=function(e){e.preventDefault(),t.state.name&&t.state.tel?"add"===t.props.addOrEdit?t.props.onAddContact(t.state):t.props.onEditContact(t.state):alert("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043f\u043e\u043b\u044f \u0456\u0437 *")},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.contactProps,e=t.name,a=t.tel,n=t.email;this.props.editID&&this.setState({name:e,tel:a,email:n})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null," ",o.a.createElement("button",{className:p.a.managing_button,type:"button",onClick:this.props.onBackward},"\u041d\u0430\u0437\u0430\u0434"),"add"===this.props.addOrEdit?o.a.createElement("h2",null,"\u041d\u043e\u0432\u0438\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"):o.a.createElement("h2",null,"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"\u0406\u043c'\u044f *"," ",o.a.createElement("input",{className:p.a.input_field,type:"text",value:this.state.name,onChange:this.handleChange,name:"name"})),o.a.createElement("label",null,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 *"," ",o.a.createElement("input",{className:p.a.input_field,type:"tel",value:this.state.tel,onChange:this.handleChange,name:"tel"})),o.a.createElement("label",null,"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u043f\u043e\u0448\u0442\u0430"," ",o.a.createElement("input",{className:p.a.input_field,type:"email",value:this.state.email,onChange:this.handleChange,name:"email"})),o.a.createElement("br",null),o.a.createElement("button",{className:p.a.add_edit_button,type:"submit"},"add"===this.props.addOrEdit?"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442")))}}]),a}(n.Component),_=a(2);a(22);_.a.initializeApp({apiKey:"AIzaSyAPczfl0I4ymXkw8GaQ99EEXH3Ecx3r0JU",authDomain:"advphonebook.firebaseapp.com",projectId:"advphonebook",storageBucket:"gs://advphonebook.appspot.com",messagingSenderId:"414776138808",appId:"1:414776138808:web:13d7caa8a323762af35acd"});var w=_.a.firestore(),y=(a(21),a(24)),C=a.n(y);function k(t){var e=t.fav,a=t.onHandleNewContact;return o.a.createElement(o.a.Fragment,null,"fav"===e?o.a.createElement("h2",null,"\u0412\u0438\u0431\u0440\u0430\u043d\u0456 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"):o.a.createElement("h2",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432"),o.a.createElement("button",{className:p.a.newcontact_showfav_button,type:"button",onClick:a},"\u041d\u043e\u0432\u0438\u0439 \u043a\u043e\u043d\u0442\u0430\u043a\u0442"))}var S=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={contacts:[],isSignedIn:!1,currentShowing:"list",editID:""},t.uiConfig={signInFlow:"popup",signInOptions:[_.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},t.resetToList=function(){t.setState({currentShowing:"list",editID:""})},t.showContacts=function(e){var a=[];w.collection(e).get().then((function(e){e.forEach((function(t){a.push(t.data())})),t.setState({contacts:a})}))},t.displayFavourite=function(){t.setState({currentShowing:"fav"})},t.filterFavs=function(){return t.state.contacts.filter((function(t){return t.favourite}))},t.handleNewContact=function(){t.setState({currentShowing:"add"})},t.addContact=function(e){var a=e.name,n=e.tel,o=e.email;t.state.contacts.find((function(t){return t.Phone===n}))?alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0437 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 \u0443\u0436\u0435 \u0456\u0441\u043d\u0443\u0454"):(t.setState({contacts:[].concat(Object(r.a)(t.state.contacts),[{id:Object(f.v4)(),Name:a,Phone:n,Email:o,favourite:!1}])}),t.resetToList())},t.addToFavToggle=function(e){var a=e.target.id,n=t.state.contacts.map((function(t){return t.id===a?Object(i.a)(Object(i.a)({},t),{},{favourite:!t.favourite}):Object(i.a)({},t)}));t.setState({contacts:n})},t.handleEditContact=function(e){t.setState({currentShowing:"edit",editID:e.target.id})},t.getPropsOfEditingContact=function(){var e={};return t.state.contacts.forEach((function(a){a.id===t.state.editID&&(e={name:a.Name,tel:a.Phone,email:a.Email})})),e},t.editContact=function(e){var a=e.name,n=e.tel,o=e.email,c=t.state.editID;if(t.state.contacts.find((function(t){return t.Phone===n&&t.id!==c})))alert("\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0437 \u0442\u0430\u043a\u0438\u043c \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 \u0443\u0436\u0435 \u0456\u0441\u043d\u0443\u0454");else{var l=t.state.contacts.map((function(t){return t.id===c?{Name:a,Phone:n,Email:o,id:t.id,favourite:t.favourite}:Object(i.a)({},t)}));t.setState({contacts:l,editID:""}),t.resetToList()}},t.deleteItem=function(e){var a=e.target.id,n=t.state.contacts.filter((function(t){return t.id!==a}));t.setState({contacts:n}),w.collection(_.a.auth().currentUser.displayName).doc(a).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(t){console.error("Error removing document: ",t)}))},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var t=this;_.a.auth().onAuthStateChanged((function(e){t.setState({isSignedIn:!!e}),t.state.isSignedIn&&t.showContacts(_.a.auth().currentUser.displayName)}))}},{key:"componentDidUpdate",value:function(t,e){e.contacts!==this.state.contacts&&(e.contacts.length>this.state.contacts.length||this.state.contacts.forEach((function(t){w.collection(_.a.auth().currentUser.displayName).doc(t.id).set({id:t.id,Name:t.Name,Phone:t.Phone,Email:t.Email,favourite:t.favourite},{merge:!0}).then((function(){console.log("Stored in DB")})).catch((function(t){console.error("Error adding ",t)}))})))}},{key:"render",value:function(){var t=this.state,e=t.isSignedIn,a=t.currentShowing,n=t.contacts;return o.a.createElement("div",{className:p.a.all_wrapper},e?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"\u0412\u0438 \u0432\u0432\u0456\u0439\u0448\u043b\u0438 \u044f\u043a: ",_.a.auth().currentUser.displayName),o.a.createElement("button",{className:p.a.managing_button,onClick:function(){return _.a.auth().signOut()}},"Sign out!"),("list"===a||"fav"===a)&&o.a.createElement("div",{className:p.a.container},o.a.createElement(k,{fav:this.state.currentShowing,onHandleNewContact:this.handleNewContact}),n.length>0&&o.a.createElement(o.a.Fragment,null,"list"===a&&o.a.createElement(E,{contacts:n,onDisplayFav:this.displayFavourite,onAddToFavToggle:this.addToFavToggle,onEditContact:this.handleEditContact,onDeleteItem:this.deleteItem}),"fav"===a&&o.a.createElement(b,{contacts:this.filterFavs(),onDisplayAll:this.resetToList}))),("add"===a||"edit"===a)&&o.a.createElement("div",{className:p.a.container},o.a.createElement(g,{onBackward:this.resetToList,onAddContact:this.addContact,onEditContact:this.editContact,addOrEdit:this.state.currentShowing,editID:this.state.editID,contactProps:this.getPropsOfEditingContact()}))):o.a.createElement(C.a,{uiConfig:this.uiConfig,firebaseAuth:_.a.auth()}))}}]),a}(n.Component);l.a.render(o.a.createElement(S,null),document.getElementById("root"))},5:function(t,e,a){t.exports={all_wrapper:"phonebook_all_wrapper__fcOTw",container:"phonebook_container__38fkm",input_field:"phonebook_input_field__noXA8",newcontact_showfav_button:"phonebook_newcontact_showfav_button__fQcv9",show_all_button:"phonebook_show_all_button__1XJXw phonebook_newcontact_showfav_button__fQcv9",add_edit_button:"phonebook_add_edit_button__IvI-J phonebook_newcontact_showfav_button__fQcv9",managing_button:"phonebook_managing_button__3KzFo",fav_inverted_button:"phonebook_fav_inverted_button__1rWqd phonebook_managing_button__3KzFo",transaction_history:"phonebook_transaction_history__120OG"}}},[[27,1,2]]]);
//# sourceMappingURL=main.1314ca3c.chunk.js.map